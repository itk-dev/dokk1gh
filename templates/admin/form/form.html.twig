{# @var ea \EasyCorp\Bundle\EasyAdminBundle\Context\AdminContext #}
{% extends '@EasyAdmin/crud/form_theme.html.twig' %}

{% block datetime_widget %}
  {% if ea.entity.fqcn|default(false) == 'App\\Entity\\Code' and name matches '/(start|end)Time/' %}
    {% include 'admin/form/Code/date_time_range.html.twig' with {markup: parent()} %}
  {% else %}
    {{ parent() }}
  {% endif %}
{% endblock %}

{% block form_widget_simple %}
  {# @FIXME: There must be a better way to do this! #}
  {% if ea.entity.fqcn == 'App\\Entity\\Template' and name == 'aeosId' %}
    {% include 'admin/form/Template/aeosId.html.twig' with {markup: parent()} %}
  {% elseif ea.entity.fqcn == 'App\\Entity\\User' and name == 'aeosId' %}
    {% include 'admin/form/User/aeosId.html.twig' with {markup: parent()} %}
  {% elseif ea.entity.fqcn == 'App\\Entity\\Guest' and name == 'phone' %}
    {% include 'admin/form/Guest/phone.html.twig' with {markup: parent()} %}
  {% else %}
    {{ parent() }}
  {% endif %}
{% endblock %}

{# @param int n: ISO-8601 numeric representation of the day of the week (1 (for Monday) through 7 (for Sunday)) #}
{% macro week_day_name(n) %}
    {# The year 2001 started on a Monday #}
    {{ ('2001-01-' ~ n)|date('l')|trans }}
{% endmacro %}

{% block app_time_ranges_widget %}
    <table id="time-ranges" class="table table-striped">
        <thead class="">
            <tr><td></td><th>{{ 'Activate'|trans }}</th><th>{{ 'Start time'|trans }}</th><th>{{ 'End time'|trans }}</th></tr>
        </thead>
        <tbody>
            {% for day in 1..7 %}
                <tr>
                    <td><label class="control-label" for="time-range-handle-{{ day }}">{{ _self.week_day_name(day)|trans }}</label></td>
                    <td><input type="checkbox" id="time-range-handle-{{ day }}" /></td>
                    <td>
                        {{ form_widget(form['start_time_' ~ day]) }}
                    </td>
                    <td>
                        {{ form_widget(form['end_time_' ~ day]) }}
                    </td>
                    <td>
                        {{ form_errors(form['start_time_' ~ day]) }}
                        {{ form_errors(form['end_time_' ~ day]) }}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    {# IMPORTANT: Don't delete these two form rows! #}
    {{ form_row(form.message) }}
    {{ form_row(form.default_values) }}
{% endblock %}
